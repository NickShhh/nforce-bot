const fetch = require('node-fetch');

module.exports = {
  name: 'topmods',
  description: 'Show the top moderators/admins who have banned the most users',
  async execute(interaction) {
    try {
      const response = await fetch('https://tu-backend-nforce.onrender.com/api/topmods');
      const top = await response.json();

      if (!Array.isArray(top) || top.length === 0) {
        return interaction.reply('📭 No ban records found.');
      }

      const list = top.map((entry, i) => `**${i + 1}.** ${entry.name} — \`${entry.count}\` bans`).join('\n');
      interaction.reply(`🏆 **Top Moderators/Admins:**\n${list}`);
    } catch (error) {
      console.error(error);
      interaction.reply({ content: '❌ Could not fetch top moderators.', ephemeral: true });
    }
  }
};
